{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap af27a3536f850f7f00d2","webpack:///./src/index.js","webpack:///./src/fe-countdown.js","webpack:///./src/timerMgr/timerMgr.js","webpack:///./src/timerMgr/option.js","webpack:///./src/timerMgr/utils.js","webpack:///./src/timerMgr/timerPool.js","webpack:///./src/timerMgr/timer.js","webpack:///./src/timerMgr/customerTimer.js","webpack:///./src/utils.js","webpack:///./src/defaultOptions.js"],"names":[],"mappings":"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","file":"countdown.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"CountDown\"] = factory();\n\telse\n\t\troot[\"CountDown\"] = factory();\n})(this, function() {\nreturn \n\n\n/** WEBPACK FOOTER **\n ** webpack/universalModuleDefinition\n **/"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap af27a3536f850f7f00d2\n **/","import countdown from \"./fe-countdown\";\r\nmodule.exports =  countdown ;\n\n\n/** WEBPACK FOOTER **\n ** ./src/index.js\n **/","import timerMgr from \"./timerMgr/timerMgr\";\nimport {\n  formatTime, formatTemplete, extend\n}\nfrom \"./utils\"\n\nimport defaultOptions from \"./defaultOptions\"\n\n\n\nvar delayTime = 1000;\n\n\n\nexport default class CountDown {\n  constructor(config) {\n    this.config = {}\n    for (var i in defaultOptions) {\n      if (defaultOptions.hasOwnProperty(i)) {\n        this.config[i] = config[i] || defaultOptions[i];\n      }\n    }\n    this.msInterval = timerMgr.generateTimer(this.config)\n    this.init();\n  }\n\n  init() {\n    var self = this;\n    if (this.fixNowDate) {\n      var fix = new timerMgr.timer(this.fixNow);\n      fix.add(function() {\n        getNowTime(function(now) {\n          self.now = now;\n        });\n      });\n    }\n    var index = this.msInterval._timer.add(function() {\n      self.now += delayTime;\n      if (self.now >= self.endTime) {\n        this.msInterval.remove(index);\n        self.end();\n      } else {\n        self.config.render(self.getOutString());\n      }\n    });\n  }\n\n  getBetween() {\n    return formatTime(this.config.endTime - this.config.now);\n  }\n\n  getOutString() {\n    var between = this.getBetween();\n    return formatTemplete(this.config.template, between);\n  }\n\n\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/fe-countdown.js\n **/","import {\n  Option\n}\nfrom \"./option\";\nimport TimerPool from \"./timerPool\";\nimport CustomerTimer from \"./customerTimer\"\n\nclass TimerMgr {\n  constructor() {\n    debugger\n    this._timerPool = new TimerPool();\n  }\n\n  _getTimer(config) {\n    return this._timerPool.getTimer(config)\n  }\n\n  generateTimer(opts) {\n    const customerTimer = new CustomerTimer(opts);\n    const timer = this._getTimer(customerTimer.config);\n    customerTimer._timer = timer;\n    return customerTimer;\n  }\n}\n\n\nconst timerMgr = new TimerMgr();\n\nmodule.exports = timerMgr;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/timerMgr/timerMgr.js\n **/","import {\n  extend\n}\nfrom \"./utils\"\n\nexport const defaultOption = {\n  fixNow: 3 * 1000,\n  fixNowDate: false,\n  now: new Date().valueOf(),\n  action: function(time) {\n    console.log(time);\n  },\n  end: function(time) {\n    console.log('the end!', time);\n  },\n  endTime: new Date().valueOf() + 5 * 1000 * 60,\n  delayTime: 1000,\n  clear: true, //自动清除 调用deatory\n  autoStart: true //自动开始\n};\n\n\nexport class Option {\n  constructor(config) {\n    for (var i in defaultOption) {\n      if (defaultOption.hasOwnProperty(i)) {\n        this[i] = config[i] || defaultOption[i];\n      }\n    }\n  }\n\n  get key() {\n    return \"delayTime:\" + this.delayTime;\n  }\n\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/timerMgr/option.js\n **/","export function extend(...args) {\n  var config = {}\n  for (var varible in args[0]) {\n    if (args[0].hasOwnProperty(varible)) {\n      config[varible] = args[1][varible] || args[0][varible]\n    }\n  }\n  return config;\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/timerMgr/utils.js\n **/","import Timer from \"./timer\";\n\n\n\nexport default class TimerPool {\n  constructor() {\n    this._pool = {};\n  }\n\n  getTimer(opts) {\n    var t = this._pool[opts.key];\n    return t ? t : (this._pool[opts.key] = new Timer(opts.delayTime));\n  }\n\n  removeTimer(key) {\n    if (this._pool[delayTime]) {\n      delete this._pool[delayTime];\n    }\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/timerMgr/timerPool.js\n **/","export default class Timer {\n  constructor(delay) {\n    this._queue = [];\n    this.stop = false;\n    this._createTimer(delay);\n  }\n\n  _createTimer(delay) {\n    var self = this;\n    var first = true;\n\n    var timeCounter;\n\n    function countDownStart() {\n      var s = new Date();\n      for (var i = 0; i < self._queue.length; i++) {\n        self._queue[i]();\n      }\n      if (!self.stop) {\n        var cost = new Date() - s;\n        delay = first ? delay : ((cost > delay) ? cost - delay :\n          delay);\n        timeCounter = setTimeout(countDownStart, delay);\n      } else {\n        clearTimeout(timeCounter);\n      }\n    }\n    countDownStart();\n    first = false;\n  }\n\n  add(cb) {\n    this._queue.push(cb);\n    this.stop = false;\n    return this._queue.length - 1;\n  }\n\n\n  remove(index) {\n    this._queue.splice(index, 1);\n    if (!this._queue.length) {\n      this.stop = true;\n    }\n  }\n\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/timerMgr/timer.js\n **/","import {\n  Option\n}\nfrom \"./option\"\n\nclass CustomerTimer {\n  constructor(opts) {\n    this.config = new Option(opts);\n  }\n\n  reset() {}\n\n  restart() {}\n\n  stop() {}\n\n  start() {}\n\n  getTimeLeft() {}\n\n  getRemainingTime() {}\n\n  reduceDelay() {}\n\n  toggle() {}\n\n  change() {}\n}\n\nexport default CustomerTimer\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/timerMgr/customerTimer.js\n **/","function cover(num) {\n  var n = parseInt(num, 10);\n  return n < 10 ? '0' + n : n;\n}\n\nfunction formatTime(ms) {\n  var s = ms / 1000,\n    m = s / 60;\n  return {\n    d: cover(m / 60 / 24),\n    h: cover(m / 60 % 24),\n    m: cover(m % 60),\n    s: cover(s % 60)\n  };\n}\n\nfunction formatTemplete(template, data) {\n  return template.replace(/{{(\\w*)}}/g, function(m, key) {\n    return data.hasOwnProperty(key) ? data[key] : \"\";\n  })\n}\n\nfunction getNowTime(cb) {\n  var xhr = new XMLHttpRequest();\n  xhr.open('get', '/', true);\n  xhr.onreadystatechange = function() {\n    if (xhr.readyState === 3) {\n      var now = xhr.getResponseHeader('Date');\n      cb(new Date(now).valueOf());\n    }\n  };\n  xhr.send(null);\n}\n\nfunction extend(...args) {\n  var config = {}\n  for (var varible in args[0]) {\n    if (args[0].hasOwnProperty(varible)) {\n      config[varible] = args[1][varible] || args[0][varible]\n    }\n  }\n  return config;\n}\n\nconst utils = {\n  cover, formatTime, formatTemplete, getNowTime, extend\n}\n\nmodule.exports = utils\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/utils.js\n **/","module.exports = {\n  fixNow: 3 * 1000,\n  fixNowDate: false,\n  now: new Date().valueOf(),\n  template: '{{d}}:{{h}}:{{m}}:{{s}}',\n  render: function(outstring) {\n    console.log(outstring);\n  },\n  end: function() {\n    console.log('the end!');\n  },\n  endTime: new Date().valueOf() + 5 * 1000 * 60,\n  delayTime: 1000\n};\n\n\n\n// export class Option {\n//   constructor() {\n//     this.fixNow: 3 * 1000;\n//     this.fixNowDate: false;\n//     this.now: new Date().valueOf();\n//     this.template: '{{d}}:{{h}}:{{m}}:{{s}}';\n//     this.render: function(outstring) {\n//       console.log(outstring);\n//     };\n//     this.end: function() {\n//       console.log('the end!');\n//     };\n//     this.endTime: new Date().valueOf() + 5 * 1000 * 60;\n//     this.delayTime: 1000\n//   }\n// };\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/defaultOptions.js\n **/"],"sourceRoot":""}